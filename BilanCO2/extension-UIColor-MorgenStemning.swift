//
//  MorgenStemning.swift
//  SuiviCriteres
//
//  Created by Hervé Kasparian on 12/03/2019.
//  Copyright © 2019 Hervé Kasparian. All rights reserved.
//

import Foundation
import UIKit

extension UIColor {
    convenience init (morgenStemningNumber: Int, MorgenStemningScaleSize: Int){
    let morgenTotal:[[CGFloat]]=[[ 0 , 0 , 0 ],[ 0.00030078431372549 , 0.00401529411764706 , 0.00572235294117647 ],[ 0.00050156862745098 , 0.00793058823529412 , 0.0114447058823529 ],[ 0.000703529411764706 , 0.0118458823529412 , 0.0171682352941176 ],[ 0.00100470588235294 , 0.0157596078431373 , 0.0229894117647059 ],[ 0.00130588235294118 , 0.0195764705882353 , 0.0287137254901961 ],[ 0.00160941176470588 , 0.0234917647058824 , 0.0345341176470588 ],[ 0.00201098039215686 , 0.0274043137254902 , 0.0402592156862745 ],[ 0.00241254901960784 , 0.0312192156862745 , 0.0460819607843137 ],[ 0.00281411764705882 , 0.0350341176470588 , 0.0519047058823529 ],[ 0.00321960784313725 , 0.0388490196078431 , 0.0577274509803922 ],[ 0.00372156862745098 , 0.0426639215686275 , 0.0635501960784314 ],[ 0.00422352941176471 , 0.0464741176470588 , 0.0693729411764706 ],[ 0.00473058823529412 , 0.0501886274509804 , 0.0751956862745098 ],[ 0.00533294117647059 , 0.053903137254902 , 0.0810239215686274 ],[ 0.00593529411764706 , 0.0576176470588235 , 0.0869470588235294 ],[ 0.00654392156862745 , 0.0613258823529412 , 0.0928701960784314 ],[ 0.00724666666666667 , 0.06494 , 0.0987933333333333 ],[ 0.00794941176470588 , 0.0685470588235294 , 0.104716470588235 ],[ 0.00865960784313726 , 0.0720682352941177 , 0.110639607843137 ],[ 0.00946274509803922 , 0.0756823529411765 , 0.116562745098039 ],[ 0.0102741176470588 , 0.0792882352941176 , 0.122485882352941 ],[ 0.0111776470588235 , 0.0828019607843137 , 0.128409019607843 ],[ 0.0120811764705882 , 0.0863156862745098 , 0.134341176470588 ],[ 0.0129941176470588 , 0.0898294117647059 , 0.140355294117647 ],[ 0.0139980392156863 , 0.0933333333333333 , 0.146278431372549 ],[ 0.0150019607843137 , 0.096756862745098 , 0.152211764705882 ],[ 0.0160164705882353 , 0.10026 , 0.158224705882353 ],[ 0.0171207843137255 , 0.10368431372549 , 0.164158823529412 ],[ 0.0182364705882353 , 0.107186666666667 , 0.170170980392157 ],[ 0.0194411764705882 , 0.1106 , 0.176094117647059 ],[ 0.0206458823529412 , 0.114013333333333 , 0.182017254901961 ],[ 0.0218505882352941 , 0.117439215686275 , 0.187940392156863 ],[ 0.0230682352941176 , 0.120952941176471 , 0.193850588235294 ],[ 0.0243733333333333 , 0.124466666666667 , 0.199686666666667 ],[ 0.025678431372549 , 0.127980392156863 , 0.205596078431373 ],[ 0.0269976470588235 , 0.131494117647059 , 0.211432941176471 ],[ 0.028403137254902 , 0.134993333333333 , 0.217341568627451 ],[ 0.0298086274509804 , 0.138406666666667 , 0.223179215686274 ],[ 0.0312294117647059 , 0.14182 , 0.229087058823529 ],[ 0.0327509803921569 , 0.145217647058824 , 0.234925490196078 ],[ 0.0343733333333333 , 0.148530588235294 , 0.24084862745098 ],[ 0.03608 , 0.151843529411765 , 0.246771764705882 ],[ 0.0378035294117647 , 0.155139607843137 , 0.252711764705882 ],[ 0.0396278431372549 , 0.158334901960784 , 0.258718039215686 ],[ 0.0415352941176471 , 0.161464705882353 , 0.264641176470588 ],[ 0.0434607843137255 , 0.164659215686275 , 0.27056431372549 ],[ 0.0454870588235294 , 0.167789803921569 , 0.276487450980392 ],[ 0.0475952941176471 , 0.171002352941176 , 0.282391764705882 ],[ 0.0497227450980392 , 0.174214901960784 , 0.288214509803922 ],[ 0.0519509803921569 , 0.177407843137255 , 0.294037254901961 ],[ 0.05428 , 0.18052 , 0.29986 ],[ 0.0567098039215686 , 0.18359137254902 , 0.305682745098039 ],[ 0.0592611764705882 , 0.186502745098039 , 0.311526274509804 ],[ 0.0619929411764706 , 0.189371764705882 , 0.317449411764706 ],[ 0.0648254901960784 , 0.192082352941176 , 0.323372549019608 ],[ 0.0677807843137255 , 0.194792941176471 , 0.32929568627451 ],[ 0.0709152941176471 , 0.197458823529412 , 0.335196470588235 ],[ 0.0741960784313726 , 0.199945882352941 , 0.341064705882353 ],[ 0.0777560784313726 , 0.202285882352941 , 0.347065098039216 ],[ 0.0815411764705882 , 0.204370588235294 , 0.353011764705882 ],[ 0.0856286274509804 , 0.206306666666667 , 0.359035294117647 ],[ 0.0900427450980392 , 0.207916078431373 , 0.365058823529412 ],[ 0.0949094117647059 , 0.209097647058824 , 0.371131764705882 ],[ 0.100456078431373 , 0.209725098039216 , 0.377356078431373 ],[ 0.10688431372549 , 0.2098 , 0.383529411764706 ],[ 0.114041176470588 , 0.209774117647059 , 0.389449411764706 ],[ 0.121728235294118 , 0.209673725490196 , 0.395018823529412 ],[ 0.129966666666667 , 0.209546666666667 , 0.40036 ],[ 0.138608235294118 , 0.209318823529412 , 0.405398823529412 ],[ 0.147680392156863 , 0.208990196078431 , 0.410135294117647 ],[ 0.157200784313725 , 0.20858862745098 , 0.414597254901961 ],[ 0.167023529411765 , 0.208158823529412 , 0.418829411764706 ],[ 0.17712 , 0.207656862745098 , 0.422787843137255 ],[ 0.187447058823529 , 0.207125882352941 , 0.426486666666667 ],[ 0.198076470588235 , 0.206494117647059 , 0.429841176470588 ],[ 0.209008235294118 , 0.205761568627451 , 0.43296431372549 ],[ 0.220212156862745 , 0.204928235294118 , 0.435815294117647 ],[ 0.231587058823529 , 0.203994117647059 , 0.438434117647059 ],[ 0.243093725490196 , 0.202959215686275 , 0.440781568627451 ],[ 0.254739215686275 , 0.201823529411765 , 0.442927450980392 ],[ 0.266384705882353 , 0.200618823529412 , 0.444903529411765 ],[ 0.278094509803922 , 0.199349803921569 , 0.446714509803922 ],[ 0.289940784313725 , 0.19794431372549 , 0.448288235294118 ],[ 0.30182 , 0.196505882352941 , 0.449695294117647 ],[ 0.313766666666667 , 0.194933333333333 , 0.450866666666667 ],[ 0.325747058823529 , 0.193192941176471 , 0.451903529411765 ],[ 0.337794117647059 , 0.191351764705882 , 0.452772941176471 ],[ 0.34987568627451 , 0.189409803921569 , 0.453507058823529 ],[ 0.361988235294118 , 0.187332156862745 , 0.454074509803922 ],[ 0.374035294117647 , 0.185123529411765 , 0.454541176470588 ],[ 0.386046666666667 , 0.182843529411765 , 0.454907058823529 ],[ 0.397957254901961 , 0.180398039215686 , 0.455172156862745 ],[ 0.409803529411765 , 0.177888235294118 , 0.455372941176471 ],[ 0.421612941176471 , 0.175378431372549 , 0.455536862745098 ],[ 0.43328431372549 , 0.17283137254902 , 0.4556 ],[ 0.444791764705882 , 0.170258823529412 , 0.4556 ],[ 0.456198431372549 , 0.167787058823529 , 0.455561960784314 ],[ 0.46750431372549 , 0.165377647058824 , 0.455461568627451 ],[ 0.478709411764706 , 0.162968235294118 , 0.455322352941177 ],[ 0.489813725490196 , 0.160558823529412 , 0.455121568627451 ],[ 0.500777647058824 , 0.158109803921569 , 0.454920784313726 ],[ 0.51162 , 0.15564 , 0.45472 ],[ 0.522421960784314 , 0.153230588235294 , 0.454478823529412 ],[ 0.533123137254902 , 0.150821176470588 , 0.454177647058824 ],[ 0.543723529411765 , 0.148411764705882 , 0.453835294117647 ],[ 0.554264705882353 , 0.146002352941176 , 0.453433725490196 ],[ 0.564763921568628 , 0.143592941176471 , 0.453032156862745 ],[ 0.575162352941176 , 0.141225882352941 , 0.452588235294118 ],[ 0.58546 , 0.138916862745098 , 0.452086274509804 ],[ 0.5957 , 0.136607843137255 , 0.45158431372549 ],[ 0.605852941176471 , 0.134298823529412 , 0.451082352941176 ],[ 0.615892156862745 , 0.131989803921569 , 0.45062431372549 ],[ 0.625887058823529 , 0.129680784313726 , 0.450178431372549 ],[ 0.635781176470588 , 0.127371764705882 , 0.449721176470588 ],[ 0.645574509803922 , 0.125107843137255 , 0.449274509803922 ],[ 0.655312549019608 , 0.122944705882353 , 0.448772549019608 ],[ 0.665004705882353 , 0.120882352941176 , 0.448270588235294 ],[ 0.674596078431372 , 0.118967058823529 , 0.44776862745098 ],[ 0.684086666666667 , 0.11716 , 0.44722 ],[ 0.693523529411765 , 0.1154 , 0.446664705882353 ],[ 0.702912941176471 , 0.113740784313726 , 0.446115294117647 ],[ 0.712249411764706 , 0.112230196078431 , 0.445512941176471 ],[ 0.721537647058824 , 0.110921176470588 , 0.444910588235294 ],[ 0.730725098039216 , 0.109765098039216 , 0.444259607843137 ],[ 0.739909803921569 , 0.108758823529412 , 0.443507843137255 ],[ 0.749096470588235 , 0.107954117647059 , 0.442655294117647 ],[ 0.758281960784314 , 0.107450588235294 , 0.441652156862745 ],[ 0.767518039215686 , 0.108303921568627 , 0.440096078431373 ],[ 0.776703529411765 , 0.111272941176471 , 0.437784705882353 ],[ 0.785890196078431 , 0.115850980392157 , 0.434919607843137 ],[ 0.795023529411765 , 0.121739215686275 , 0.431499215686275 ],[ 0.804007058823529 , 0.128627058823529 , 0.427681176470588 ],[ 0.812941960784314 , 0.136376862745098 , 0.423557254901961 ],[ 0.821719215686274 , 0.145187058823529 , 0.418977647058824 ],[ 0.8303 , 0.154894117647059 , 0.414052941176471 ],[ 0.838673333333333 , 0.165093333333333 , 0.408926666666667 ],[ 0.846851764705882 , 0.175702352941176 , 0.403598823529412 ],[ 0.854821176470588 , 0.186923529411765 , 0.398015294117647 ],[ 0.862542745098039 , 0.198850196078431 , 0.392129411764706 ],[ 0.869952941176471 , 0.211537254901961 , 0.385886274509804 ],[ 0.877070588235294 , 0.224864705882353 , 0.379350588235294 ],[ 0.883930980392157 , 0.238640392156863 , 0.372557647058824 ],[ 0.890489019607843 , 0.252707058823529 , 0.365518431372549 ],[ 0.896801176470588 , 0.266805882352941 , 0.358390588235294 ],[ 0.902911764705882 , 0.280917647058824 , 0.351205882352941 ],[ 0.908763529411765 , 0.295187450980392 , 0.343863137254902 ],[ 0.914312941176471 , 0.309658823529412 , 0.336376470588235 ],[ 0.91956 , 0.324389803921569 , 0.328672941176471 ],[ 0.924504705882353 , 0.339423137254902 , 0.320783921568627 ],[ 0.929147058823529 , 0.3547 , 0.312735294117647 ],[ 0.933427843137255 , 0.370178431372549 , 0.304485098039216 ],[ 0.937365098039216 , 0.385918039215686 , 0.295973725490196 ],[ 0.941 , 0.4019 , 0.28728 ],[ 0.944332549019608 , 0.417962745098039 , 0.278425098039216 ],[ 0.947423529411765 , 0.434086274509804 , 0.269429411764706 ],[ 0.950251764705882 , 0.450249411764706 , 0.260271764705882 ],[ 0.952777647058824 , 0.466350980392157 , 0.25103568627451 ],[ 0.955063137254902 , 0.482351764705882 , 0.241737647058824 ],[ 0.957209411764706 , 0.498189411764706 , 0.232401176470588 ],[ 0.959192156862745 , 0.513762745098039 , 0.223001960784314 ],[ 0.961036470588235 , 0.529096862745098 , 0.213565098039216 ],[ 0.962716470588235 , 0.544229411764706 , 0.204128235294118 ],[ 0.964258823529412 , 0.55922431372549 , 0.194755294117647 ],[ 0.965636078431373 , 0.573989803921569 , 0.185418823529412 ],[ 0.966876470588235 , 0.588582352941177 , 0.176082352941176 ],[ 0.967950980392157 , 0.603009019607843 , 0.166810980392157 ],[ 0.968889411764706 , 0.617234117647059 , 0.157640392156863 ],[ 0.969727058823529 , 0.631257647058823 , 0.148636470588235 ],[ 0.970463921568627 , 0.645079607843137 , 0.139767843137255 ],[ 0.971033333333333 , 0.6587 , 0.131 ],[ 0.971535294117647 , 0.672051764705882 , 0.1224 ],[ 0.972037254901961 , 0.68516862745098 , 0.113934117647059 ],[ 0.97247137254902 , 0.698083921568628 , 0.105636862745098 ],[ 0.972872941176471 , 0.710729411764706 , 0.0974729411764706 ],[ 0.973274509803922 , 0.723141176470588 , 0.0894098039215686 ],[ 0.973676078431372 , 0.73535137254902 , 0.0813094117647059 ],[ 0.974147058823529 , 0.747290588235294 , 0.0732470588235294 ],[ 0.974579215686274 , 0.758927450980392 , 0.0653552941176471 ],[ 0.974980784313725 , 0.770402352941176 , 0.0578054901960784 ],[ 0.975382352941176 , 0.781635294117647 , 0.0506588235294118 ],[ 0.975783921568627 , 0.792636862745098 , 0.0439152941176471 ],[ 0.976256862745098 , 0.803436862745098 , 0.0375749019607843 ],[ 0.976758823529412 , 0.814035294117647 , 0.0315658823529412 ],[ 0.977332941176471 , 0.82436 , 0.0257149019607843 ],[ 0.978007843137255 , 0.834454901960784 , 0.0202549019607844 ],[ 0.978710588235294 , 0.844348235294118 , 0.0153717647058824 ],[ 0.979486666666667 , 0.854113333333333 , 0.0110933333333334 ],[ 0.980363529411765 , 0.863630196078431 , 0.00727215686274506 ],[ 0.981267058823529 , 0.872992941176471 , 0.00407647058823526 ],[ 0.982245098039216 , 0.882254901960784 , 0.00166078431372548 ],[ 0.983249019607843 , 0.891416078431373 , 0.000276078431372548 ],[ 0.984177647058824 , 0.900627058823529 , 0.00240941176470587 ],[ 0.985081176470588 , 0.909787450980392 , 0.00811960784313722 ],[ 0.985984705882353 , 0.918694901960784 , 0.0162427450980391 ],[ 0.986964705882353 , 0.9273 , 0.0265588235294116 ],[ 0.98796862745098 , 0.935449019607843 , 0.0382466666666668 ],[ 0.988972549019608 , 0.94324862745098 , 0.0514294117647059 ],[ 0.989976470588235 , 0.950668235294118 , 0.0663023529411765 ],[ 0.990902352941176 , 0.957606666666667 , 0.0824203921568627 ],[ 0.991727450980392 , 0.964276470588235 , 0.0987843137254902 ],[ 0.992530588235294 , 0.970508235294118 , 0.1157 ],[ 0.993412941176471 , 0.976156862745098 , 0.133558823529412 ],[ 0.994236862745098 , 0.981200784313725 , 0.152425490196078 ],[ 0.99496 , 0.98572 , 0.17238 ],[ 0.995662745098039 , 0.989494117647059 , 0.193282352941176 ],[ 0.996365490196078 , 0.992542745098039 , 0.215091764705882 ],[ 0.997149411764706 , 0.994804705882353 , 0.237808235294118 ],[ 0.997952549019608 , 0.996178823529412 , 0.261594901960784 ],[ 0.998591764705882 , 0.996891764705882 , 0.286080392156863 ],[ 0.998864705882353 , 0.997247058823529 , 0.310841176470588 ],[ 0.9989 , 0.9973 , 0.335638039215686 ],[ 0.998650588235294 , 0.997050588235294 , 0.360351764705883 ],[ 0.998182352941176 , 0.996665882352941 , 0.38454705882353 ],[ 0.997596470588235 , 0.99626431372549 , 0.408053725490196 ],[ 0.997162745098039 , 0.995862745098039 , 0.430349019607843 ],[ 0.997015294117647 , 0.9958 , 0.450571764705882 ],[ 0.997085098039216 , 0.995970196078431 , 0.469428235294118 ],[ 0.997185490196078 , 0.996170980392157 , 0.487502745098039 ],[ 0.997285882352941 , 0.996457647058824 , 0.504957647058824 ],[ 0.997472549019608 , 0.996758823529412 , 0.522066666666667 ],[ 0.997586666666667 , 0.996973333333333 , 0.538786666666667 ],[ 0.997774117647059 , 0.997261176470588 , 0.555103529411765 ],[ 0.997887450980392 , 0.997474901960784 , 0.571279607843137 ],[ 0.9979 , 0.997587843137255 , 0.587442745098039 ],[ 0.9979 , 0.9976 , 0.603429411764706 ],[ 0.9979 , 0.99768862745098 , 0.619214509803922 ],[ 0.9979 , 0.9977 , 0.634709019607843 ],[ 0.9979 , 0.997789411764706 , 0.649901176470588 ],[ 0.9979 , 0.9978 , 0.664880784313726 ],[ 0.997990196078431 , 0.997890196078431 , 0.679658823529412 ],[ 0.998 , 0.9979 , 0.694144705882353 ],[ 0.998090980392157 , 0.997990980392157 , 0.708328235294118 ],[ 0.99819137254902 , 0.998182745098039 , 0.722300784313725 ],[ 0.998291764705882 , 0.998291764705882 , 0.736071764705882 ],[ 0.99848431372549 , 0.99848431372549 , 0.749641176470588 ],[ 0.998685098039216 , 0.998685098039216 , 0.763009019607843 ],[ 0.998792941176471 , 0.998792941176471 , 0.776268235294118 ],[ 0.998986666666667 , 0.998893333333333 , 0.789426666666667 ],[ 0.999093725490196 , 0.998993725490196 , 0.802578039215686 ],[ 0.999194117647059 , 0.999094117647059 , 0.815729411764706 ],[ 0.9992 , 0.9991 , 0.828786274509804 ],[ 0.9992 , 0.9991 , 0.841742352941176 ],[ 0.9992 , 0.9991 , 0.854692941176471 ],[ 0.9992 , 0.9991 , 0.867452156862745 ],[ 0.9992 , 0.9991 , 0.880105882352941 ],[ 0.9992 , 0.9991 , 0.892658823529412 ],[ 0.9992 , 0.999196862745098 , 0.905014117647059 ],[ 0.999297254901961 , 0.999297254901961 , 0.917265098039216 ],[ 0.9993 , 0.9993 , 0.929415294117647 ],[ 0.999398039215686 , 0.999398039215686 , 0.941464705882353 ],[ 0.999498431372549 , 0.999498431372549 , 0.953413333333333 ],[ 0.999598823529412 , 0.999598823529412 , 0.965162352941176 ],[ 0.999699215686275 , 0.999699215686275 , 0.976908235294118 ],[ 0.999799607843137 , 0.999799607843137 , 0.988554509803922 ],[ 1 , 1 , 1 ]]

   
        let Scales:[[Int]]=[[],[200],[200,100],[200,150,100],[200,150,100,75],[200,175,150,100,75],[200,175,150,125,100,75],[200,175,150,137,125,100,75],[200,175,150,137,125,100,75,0],[200,180,160,145,130,110,95,75,0],[200,180,160,145,130,110,95,75,50,0]]
        
        let nbMaxPourPasArriverAuBlanc:Int=200
    var index=morgenStemningNumber
    if index<0{index=0}
    if index>nbMaxPourPasArriverAuBlanc{index=nbMaxPourPasArriverAuBlanc}
        
    var NombreDeMarche=MorgenStemningScaleSize
    if NombreDeMarche<(index+1){
    NombreDeMarche=index+1
    }
    if NombreDeMarche<1{
    NombreDeMarche=1
    }
        
    var n=Int(round(Double(nbMaxPourPasArriverAuBlanc*index)/Double(NombreDeMarche)))
        
        n=nbMaxPourPasArriverAuBlanc-n
        if NombreDeMarche<11{
            n=Scales[NombreDeMarche][index]
        }
      
        if n<0{n=0}
        if n>255{n=255}
    
      //  return morgenTotal[n]
    self.init(red: morgenTotal[n][0] , green: morgenTotal[n][1] , blue: morgenTotal[n][2] , alpha: 1)
    }
    
    func rgb() -> (red:Int, green:Int, blue:Int, alpha:Int)? {
        var fRed : CGFloat = 0
        var fGreen : CGFloat = 0
        var fBlue : CGFloat = 0
        var fAlpha: CGFloat = 0
        if self.getRed(&fRed, green: &fGreen, blue: &fBlue, alpha: &fAlpha) {
            let iRed = Int(fRed * 255.0)
            let iGreen = Int(fGreen * 255.0)
            let iBlue = Int(fBlue * 255.0)
            let iAlpha = Int(fAlpha * 255.0)

            return (red:iRed, green:iGreen, blue:iBlue, alpha:iAlpha)
        } else {
            // Could not extract RGBA components:
            return nil
        }
    }
}
